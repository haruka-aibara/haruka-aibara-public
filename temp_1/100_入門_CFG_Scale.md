# CFG Scale (難易度レベル: 100)

## 概要
CFG Scaleは、AIを使って画像を生成するときに使う「指示の強さ」を調整するための設定です。例えば「美しい夕日」という指示に対して、どれだけ忠実に画像を生成するかを決める数値です。この設定を変えることで、生成される画像の雰囲気や特徴をコントロールすることができます。

## 詳細
### CFG Scaleとは
- 指示（プロンプト）の影響力を調整する数値
- 1.0から20.0くらいの範囲で設定できる
- 数値が大きいほど、指示に忠実な画像が生成される
- 数値が小さいほど、AIの創造性が活かされた画像が生成される

### 主な特徴
- 指示の通りに画像を生成したいときは数値を大きくする
- より自由な表現をしたいときは数値を小さくする
- 生成される画像の雰囲気を簡単に調整できる

### よく使う場面
- テキストから画像を生成するとき
- 画像の編集や修正をするとき
- 特定のスタイルの画像を作りたいとき

## 具体例
```python
# Stable Diffusionで画像を生成する簡単な例
from diffusers import StableDiffusionPipeline
import torch

# モデルの準備
model = StableDiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    torch_dtype=torch.float16
).to("cuda")

# 画像生成の指示
prompt = "美しい夕日、デジタルアート"

# 異なるCFG Scale値で画像を生成
cfg_scales = [1.0, 7.0, 15.0]

for cfg_scale in cfg_scales:
    # 画像を生成
    image = model(
        prompt,
        guidance_scale=cfg_scale,
        num_inference_steps=50
    ).images[0]
    
    # 画像を保存
    image.save(f"output_cfg_{cfg_scale}.png")
```

### CFG Scaleの効果
1. 小さい値（1.0-5.0）
   - より自由な表現
   - 予想外の面白い結果が出ることも
   - 指示から少し外れた画像が生成される

2. 中間の値（5.0-10.0）
   - バランスの取れた結果
   - 指示を守りつつ、ある程度の自由さも
   - 一般的な用途に最適

3. 大きい値（10.0以上）
   - 指示に忠実な結果
   - より正確な画像生成
   - 時には硬い印象になることも

## まとめ
CFG Scaleは、AI画像生成を始める人にとって重要な設定の一つです。この数値を調整するだけで、生成される画像の雰囲気を簡単に変えることができます。最初は中間の値（7.0くらい）から始めて、徐々に調整していくことをお勧めします。自分の目的に合わせて、最適な値を見つけていきましょう！ 
